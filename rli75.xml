<project name="M4" default="all" basedir=".">

	<!-- init -->
	<target name="init">
		<echo> Starting init boo</echo>
		<property name="build.dir" value="build" />
		<property name="src.dir" value="src/edu/gatech/oad/antlab/" />
		<property name="main.dir" value="edu/gatech/oad/antlab/pkg1/AntLabMain" />
		<property name="doc.dir" value="apidoc" />
		<property name="out.dir" value="out" />
		<property name="lib.dir" value="lib/resources.jar" />
		<echo> Finished init </echo>
	</target>
	
	<!-- prepare -->
	<target name="prepare" depends="init">
		<echo> Starting prepare </echo>
		<mkdir dir="${build.dir}" />
		<mkdir dir="${doc.dir}" />
		<mkdir dir="${out.dir}" />
		<echo> Finished prepare </echo>
	</target>

	<!-- compile -->
	<target name="compile" depends="prepare">
		<echo> Starting compile </echo>
		<javac srcdir="${src.dir}" destdir="${build.dir}" classpath="${lib.dir}" /> 
		<echo> Finished compile </echo>
	</target>
	
	<!-- Javadocs -->
	<target name="javadoc" depends="compile">
		<echo> Starting javadoc </echo>
		<javadoc sourcepath="${src.dir}" destdir="${doc.dir}"/>
		<echo> Finished javadoc </echo>
	</target>
	
	<!-- jar -->
	<target name="jar" depends="compile">
		<echo> Starting jar </echo>
		<jar destfile="AntLabRun.jar" basedir="${build.dir}">
			<manifest>
				<attribute name="Main-Class" value="${main.dir}" />
				<attribute name="Class-Path" value="${lib.dir}" />
			</manifest>
		</jar>
		<echo> Finished jar </echo>
	</target>

	<!-- run -->
	<target name="run" depends="jar">
		<echo> Starting run </echo>
		<java jar="AntLabRun.jar" fork="true" />
		<echo> Finished run </echo>
	</target>
	
   <!-- run all tasks except cleanup -->
   <target name="all" depends="run" />
   
   <!-- clean up all files generated by the build -->
   <target name="clean" depends="init" >
      <delete dir="${build.dir}" />
   </target>
	
</project>